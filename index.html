
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CropGenius - Agricultural Intelligence Platform</title>
  <!-- Build: 20250128-1745-production -->

  <link rel="icon" type="image/png" href="/cropgeniuslogo.png" />
  <link rel="apple-touch-icon" href="/cropgeniuslogo.png" />
  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#1a8917" />
  <script>
    // CropGenius PWA Control - Capture install prompt
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("/service-worker.js");
    }

    // Capture and store the beforeinstallprompt event
    let deferredPrompt;
    window.addEventListener("beforeinstallprompt", (e) => {
      console.log('ðŸ”¥ [PWA] BeforeInstallPrompt event captured');
      e.preventDefault();
      deferredPrompt = e;
      
      // Store for React component to access
      window.deferredPrompt = e;
      
      // Dispatch custom event for React to listen to
      window.dispatchEvent(new CustomEvent('pwapromptavailable', { detail: e }));
    });

    // Track successful installation
    window.addEventListener("appinstalled", () => {
      console.log('ðŸš€ [PWA] CropGenius installed successfully');
      localStorage.setItem("cg_installed", "true");
      deferredPrompt = null;
      window.deferredPrompt = null;
    });
  </script>
</head>

<body>
  <div id="root"></div>
  <script type="module" crossorigin src="/assets/index-CejqITUr.js"></script>
  <link rel="modulepreload" crossorigin href="/assets/mapbox-D_9SAz2h.js">
  <link rel="modulepreload" crossorigin href="/assets/vendor-DX0g0oZq.js">
  <link rel="modulepreload" crossorigin href="/assets/ui-D4LcuKpb.js">
  <link rel="stylesheet" crossorigin href="/assets/index-CZIlOMsa.css">
</body>

</html>
